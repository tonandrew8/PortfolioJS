<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Andrew's Porfolio Website</title>
    <noscript>Please Enable Javascript</noscript>
    <link rel="stylesheet" href="style.css" />
    <style></style>
    <link rel="icon" href="./assets/images/LuffyHero.png" type="image/x-icon" />
    <noscript>
      <style>
        .theme-switch {
          display: none;
        }
      </style>
    </noscript>
  </head>
  <body>
    <header>
      <nav class="site-nav">
        <button class="nav-toggle" aria-label="Open menu">
          <img src="./assets/images/burger.svg" alt="Menu" />
        </button>

        <ul class="nav-list">
          <li><a href="#landing">Home</a></li>
          <li><a href="#about">About</a></li>
          <li><a href="#tech">Technologies</a></li>
          <li><a href="#projects">Projects</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>

        <button class="theme-switch">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="24px"
            viewBox="0 -960 960 960"
            width="24px"
            fill="#e3e3e3"
          >
            <path
              d="M440-760v-160h80v160h-80Zm266 110-55-55 112-115 56 57-113 113Zm54 210v-80h160v80H760ZM440-40v-160h80v160h-80ZM254-652 140-763l57-56 113 113-56 54Zm508 512L651-255l54-54 114 110-57 59ZM40-440v-80h160v80H40Zm157 300-56-57 112-112 29 27 29 28-114 114Zm283-100q-100 0-170-70t-70-170q0-100 70-170t170-70q100 0 170 70t70 170q0 100-70 170t-170 70Zm0-80q66 0 113-47t47-113q0-66-47-113t-113-47q-66 0-113 47t-47 113q0 66 47 113t113 47Zm0-160Z"
            />
          </svg>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="24px"
            viewBox="0 -960 960 960"
            width="24px"
            fill="#EFEFEF"
          >
            <path
              d="M480-120q-150 0-255-105T120-480q0-150 105-255t255-105q14 0 27.5 1t26.5 3q-41 29-65.5 75.5T444-660q0 90 63 153t153 63q55 0 101-24.5t75-65.5q2 13 3 26.5t1 27.5q0 150-105 255T480-120Zm0-80q88 0 158-48.5T740-375q-20 5-40 8t-40 3q-123 0-209.5-86.5T364-660q0-20 3-40t8-40q-78 32-126.5 102T200-480q0 116 82 198t198 82Zm-10-270Z"
            />
          </svg>
        </button>
      </nav>
    </header>

    <main>
      <section id="landing">
        <article>
          <h1 id="intro-text">
            Hey <i>I'm Andrew</i> I am studying
            <strong>Computer Science at UCSD</strong>
          </h1>
          <p>I am looking to be a softeware engineer</p>
          <a
            href="https://www.linkedin.com/in/andrew-ton-367b18253/"
            target="_blank"
            rel="noopener noreferrer"
            class="btn"
          >
            Get in Touch with Me
          </a>
        </article>

        <div>
          <picture>
            <source
              type="image/avif"
              srcset="
                ./assets/images/landingImg/LuffyHero-480.avif   480w,
                ./assets/images/landingImg/LuffyHero-800.avif   800w,
                ./assets/images/landingImg/LuffyHero-1200.avif 1200w
              "
              sizes="(max-width: 480px) 100vw,
           (max-width: 1024px) 80vw,
           1200px"
            />
            <source
              type="image/webp"
              srcset="
                ./assets/images/landingImg/LuffyHero-480.webp   480w,
                ./assets/images/landingImg/LuffyHero-800.webp   800w,
                ./assets/images/landingImg/LuffyHero-1200.webp 1200w
              "
              sizes="(max-width: 480px) 100vw,
           (max-width: 1024px) 80vw,
           1200px"
            />
            <img
              src="./assets/images/LuffyHero-800.jpg"
              srcset="
                ./assets/images/landingImg/LuffyHero-480.jpg   480w,
                ./assets/images/landingImg/LuffyHero-800.jpg   800w,
                ./assets/images/landingImg/LuffyHero-1200.jpg 1200w
              "
              sizes="(max-width: 480px) 100vw,
           (max-width: 1024px) 80vw,
           1200px"
              alt="Monkey D. Luffy waving enthusiastically against a blue sky"
              loading="lazy"
              width="800"
              style="
                display: block;
                width: 100%;
                height: auto;
                object-fit: cover;
                object-position: center center;
              "
            />
          </picture>
        </div>
      </section>

      <section id="about">
        <hgroup>
          <h2>About Me</h2>
        </hgroup>
        <p>
          <em>
            Something about me is that I really enjoy Card Games! I like to
            collect rare cards and my favorite card game to play is One Piece
            TCG. Currently the deck I play is Purple Luffy which focuses on
            sacrificing your own health in order to gain an advantage.
            <br />
          </em>
        </p>

        <section class="hobbies">
          <section class="collection" aria-labelledby="collection-heading">
            <h2 id="collection-heading">Favorite One Piece Cards</h2>
            <ul class="cards">
              <li>
                <figure>
                  <img
                    src="./assets/images/luffydodger.png"
                    alt="Luffy Dodger"
                    loading="lazy"
                  />
                </figure>
              </li>
              <li>
                <figure>
                  <img
                    src="./assets/images/law.png"
                    alt="Law Card"
                    loading="lazy"
                  />
                </figure>
              </li>
              <li>
                <figure>
                  <img
                    src="./assets/images/captainkidd.png"
                    alt="Captain Kidd Card"
                    loading="lazy"
                  />
                </figure>
              </li>
              <li>
                <figure>
                  <img
                    src="./assets/images/doflamingo.png"
                    alt="DoFlamingo Card"
                    loading="lazy"
                  />
                </figure>
              </li>
              <li>
                <figure>
                  <img src="./assets/images/zoro.png" alt="Zoro Card
                  loading="lazy" />
                </figure>
              </li>
            </ul>
          </section>

          <section class="collection" aria-labelledby="collection-heading">
            <h2 id="collection-heading">Favorite Pokemon Cards</h2>
            <ul class="cards">
              <li>
                <figure>
                  <img
                    src="./assets/images/pikatchu.png"
                    alt="pikatchu card"
                    loading="lazy"
                  />
                </figure>
              </li>
              <li>
                <figure>
                  <img
                    src="./assets/images/snorlax.png"
                    alt="Snorlax card"
                    loading="lazy"
                  />
                </figure>
              </li>
              <li>
                <figure>
                  <img
                    src="./assets/images/raquaza.png"
                    alt="Raquaza Card"
                    loading="lazy"
                  />
                </figure>
              </li>
              <li>
                <figure>
                  <img
                    src="./assets/images/ubreon.png"
                    alt="umbreon card"
                    loading="lazy"
                  />
                </figure>
              </li>
              <li>
                <figure>
                  <img
                    src="./assets/images/OPDodger.png"
                    alt="One Piece Dodger card"
                    loading="lazy"
                  />
                </figure>
              </li>
            </ul>
          </section>
        </section>
      </section>

      <section id="tech">
        <h2>Technologies Used</h2>
        <div class="tech-container">
          <section class="flex">
            <div>
              <h3>Languages</h3>
              <ul>
                <li>
                  <img
                    src="./assets/images/html.svg"
                    alt="HTML Icon"
                    loading="lazy"
                  />
                </li>
                <li>
                  <img
                    src="./assets/images/css.svg"
                    alt="CSS Icon"
                    loading="lazy"
                  />
                </li>
                <li>
                  <img
                    src="./assets/images/javascript.svg"
                    alt="Javascript icon"
                    loading="lazy"
                  />
                </li>
              </ul>
            </div>
            <div>
              <h3>Frameworks</h3>
              <ul>
                <li>
                  <img
                    src="./assets/images/react.svg"
                    alt="react icon"
                    loading="lazy"
                  />
                </li>
                <li>
                  <img
                    src="./assets/images/tailwind.svg"
                    alt="tailwind icon"
                    loading="lazy"
                  />
                </li>
                <li>
                  <img
                    src="./assets/images/django.svg"
                    alt="dkango icon"
                    loading="lazy"
                  />
                </li>
              </ul>
            </div>
            <div>
              <h3>Tools</h3>
              <ul>
                <li>
                  <img
                    src="./assets/images/prisma.svg"
                    alt="prisma icon"
                    loading="lazy"
                  />
                </li>
                <li>
                  <img
                    src="./assets/images/sql.svg"
                    alt="sql icon"
                    loading="lazy"
                  />
                </li>
                <li>
                  <img
                    src="./assets/images/mongo.svg"
                    alt="MongoDB icon"
                    loading="lazy"
                  />
                </li>
              </ul>
            </div>
          </section>
        </div>
      </section>

      <section id="projects">
        <h2>My Projects</h2>
        <section class="project-container">
          <section class="collection" aria-labelledby="collection-heading">
            <ul class="cards">
              <li>
                <figure>
                  <a href="https://stutea-test.vercel.app/" target="_blank">
                    <img
                      src="./assets/images/projects/stutea/stutea.png"
                      alt="Link to Stutea Website Project"
                      loading="lazy"
                    />
                  </a>
                </figure>
              </li>
              <li>
                <figure>
                  <a href="https://avatardle.vercel.app/" target="_blank">
                    <img
                      src="./assets/images/projects/avartardle/avatardle.png"
                      alt="Link to Avatar Website Project"
                      loading="lazy"
                    />
                  </a>
                </figure>
              </li>
            </ul>
          </section>
        </section>
      </section>

      <section id="contact">
        <form action="https://httpbin.org/post" method="POST">
          <h2>Contact</h2>
          <label for="name">Name <span>*</span></label>
          <input type="text" name="name" id="name" required />

          <label for="email">Email </label>
          <input type="email" name="email" id="email" required />

          <label for="comments">Comment <span>*</span></label>
          <textarea
            required
            id="comments"
            name="comments"
            rows="5"
            cols="40"
            placeholder="Enter your comments here..."
            required
            maxlength="200"
          ></textarea>

          <label for="phone">Phone Number <span>*</span></label>
          <input type="text" name="phone" id="phone" />

          <input
            type="text"
            id="possible_bot"
            name="possible_bot"
            value="true"
            hidden
          />

          <input type="hidden" name="form-errors" id="form-errors-json" />
          <button type="submit">Submit</button>
          <output
            id="error-msg"
            name="error"
            for="name email comments"
          ></output>
          <output id="info-msg" name="info"></output>
        </form>
      </section>
    </main>

    <footer>@copyright Andrew Ton</footer>
  </body>

  <script>
    const form = document.querySelector("form");
    const errorOutput = document.getElementById("error-msg");
    const infoOutput = document.getElementById("info-msg");
    const formErrorsInput = document.getElementById("form-errors-json");

    const nameInput = form.name;
    const emailInput = form.email;
    const commentsInput = form.comments;
    const phoneInput = form.phone;

    const form_errors = [];

    nameInput.addEventListener("input", (e) => {
      const validChars = /^[a-zA-Z\s]*$/;
      if (!validChars.test(e.target.value)) {
        flashError(nameInput, "Name can only contain letters and spaces.");
      }
    });

    emailInput.addEventListener("input", (e) => {
      const validChars = /^[a-zA-Z0-9@._-]*$/;
      if (!validChars.test(e.target.value)) {
        flashError(emailInput, "Email contains illegal characters.");
      }
    });

    phoneInput.addEventListener("input", (e) => {
      const validChars = /^[0-9+\s()-]*$/;
      if (!validChars.test(e.target.value)) {
        flashError(phoneInput, "Phone number contains illegal characters.");
      }
    });

    const maxChars = commentsInput.maxLength;
    const countdown = document.createElement("div");
    countdown.style.fontSize = "0.9rem";
    commentsInput.insertAdjacentElement("afterend", countdown);

    commentsInput.addEventListener("input", () => {
      const remaining = maxChars - commentsInput.value.length;
      countdown.textContent = `${remaining} characters remaining`;
      if (remaining < 5) {
        countdown.style.color = "red";
      } else {
        countdown.style.color = "";
      }
      if (remaining <= 0) {
        flashError(commentsInput, "You've reached the character limit.");
      }
    });

    function flashError(field, message) {
      field.style.border = "2px solid red";
      errorOutput.textContent = message;
      errorOutput.style.color = "red";
      form_errors.push({
        field: field.name,
        value: field.value,
        error: message,
        timestamp: new Date().toISOString(),
      });
      setTimeout(() => {
        field.style.border = "";
        errorOutput.textContent = "";
      }, 2000);
    }

    form.addEventListener("submit", (e) => {
      errorOutput.textContent = "";
      infoOutput.textContent = "";
      form_errors.length = 0;
      validateField(nameInput, "Name is required.");
      validateField(
        emailInput,
        "Valid email is required.",
        /^[^@\s]+@[^@\s]+\.[^@\s]+$/
      );
      validateField(commentsInput, "Comment is required.");
      validateField(phoneInput, "Phone number is required.", /^[0-9+\s()-]*$/);
      if (!form.checkValidity()) {
        e.preventDefault();
        errorOutput.textContent = "Please fix the errors in the form.";
        errorOutput.style.color = "red";
      } else {
        infoOutput.textContent = "Form submitted successfully!";
        infoOutput.style.color = "green";
      }
      formErrorsInput.value = JSON.stringify(form_errors);
    });

    function validateField(field, message, pattern = null) {
      field.setCustomValidity("");
      if (!field.value.trim()) {
        field.setCustomValidity(message);
        flashError(field, message);
      } else if (pattern && !pattern.test(field.value)) {
        field.setCustomValidity("Invalid format.");
        flashError(field, "Invalid format.");
      } else {
        field.setCustomValidity("");
      }
      field.checkValidity();
    }

    // for theme mode
    let lightmode = localStorage.getItem("lightmode");
    const themeSwitch = document.querySelector(".theme-switch");

    const enableLightMode = () => {
      document.body.classList.add("lightmode");
      localStorage.setItem("lightmode", "active");
    };

    const disableLightMode = () => {
      document.body.classList.remove("lightmode");
      localStorage.setItem("lightmode", null);
    };

    if (lightmode === "active") {
      enableLightMode();
    }

    themeSwitch.addEventListener("click", () => {
      lightmode = localStorage.getItem("lightmode");
      if (lightmode == "active") {
        disableLightMode();
      } else {
        enableLightMode();
      }
    });
  </script>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Andrew's Porfolio Website</title>
    <noscript>Please Enable Javascript</noscript>
    <link rel="stylesheet" href="style.css" />
    <style></style>
    <link rel="icon" href="./assets/images/LuffyHero.png" type="image/x-icon" />
    <noscript>
      <style>
        .theme-switch {
          display: none;
        }
      </style>
    </noscript>
  </head>
  <body>
    <header>
      <nav class="site-nav">
        <button class="nav-toggle" aria-label="Open menu">
          <img src="./assets/images/burger.svg" alt="Menu" />
        </button>

        <ul class="nav-list">
          <li><a href="#landing">Home</a></li>
          <li><a href="#about">About</a></li>
          <li><a href="#tech">Technologies</a></li>
          <li><a href="#projects">Projects</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>

        <select name="dropdown" id="dropdown">
          <option value="">Select Theme</option>
          <option value="dark_theme">Night Theme</option>
          <option value="light_theme">Light Theme</option>
          <option value="jungle_theme">Jungle Theme</option>
          <option value="fire_theme">Fire Theme</option>
          <option value="sand_theme">Sand Theme</option>
        </select>
      </nav>
    </header>

    <main>
      <section id="landing">
        <article>
          <h1 id="intro-text">
            Hey <i>I'm Andrew</i> I am studying
            <strong>Computer Science at UCSD</strong>
          </h1>
          <p>I am looking to be a softeware engineer</p>
          <a
            href="https://www.linkedin.com/in/andrew-ton-367b18253/"
            target="_blank"
            rel="noopener noreferrer"
            class="btn"
          >
            Get in Touch with Me
          </a>
        </article>

        <div>
          <picture>
            <source
              type="image/avif"
              srcset="
                ./assets/images/landingImg/LuffyHero-480.avif   480w,
                ./assets/images/landingImg/LuffyHero-800.avif   800w,
                ./assets/images/landingImg/LuffyHero-1200.avif 1200w
              "
              sizes="(max-width: 480px) 100vw,
           (max-width: 1024px) 80vw,
           1200px"
            />
            <source
              type="image/webp"
              srcset="
                ./assets/images/landingImg/LuffyHero-480.webp   480w,
                ./assets/images/landingImg/LuffyHero-800.webp   800w,
                ./assets/images/landingImg/LuffyHero-1200.webp 1200w
              "
              sizes="(max-width: 480px) 100vw,
           (max-width: 1024px) 80vw,
           1200px"
            />
            <img
              src="./assets/images/LuffyHero-800.jpg"
              srcset="
                ./assets/images/landingImg/LuffyHero-480.jpg   480w,
                ./assets/images/landingImg/LuffyHero-800.jpg   800w,
                ./assets/images/landingImg/LuffyHero-1200.jpg 1200w
              "
              sizes="(max-width: 480px) 100vw,
           (max-width: 1024px) 80vw,
           1200px"
              alt="Monkey D. Luffy waving enthusiastically against a blue sky"
              loading="lazy"
              width="800"
              style="
                display: block;
                width: 100%;
                height: auto;
                object-fit: cover;
                object-position: center center;
              "
            />
          </picture>
        </div>
      </section>

      <section id="about">
        <hgroup>
          <h2>About Me</h2>
        </hgroup>
        <p>
          <em>
            Something about me is that I really enjoy Card Games! I like to
            collect rare cards and my favorite card game to play is One Piece
            TCG. Currently the deck I play is Purple Luffy which focuses on
            sacrificing your own health in order to gain an advantage.
            <br />
          </em>
        </p>

        <section class="hobbies">
          <section class="collection" aria-labelledby="collection-heading">
            <h2 id="collection-heading">Favorite One Piece Cards</h2>
            <ul class="cards">
              <li>
                <figure>
                  <img
                    src="./assets/images/luffydodger.png"
                    alt="Luffy Dodger"
                    loading="lazy"
                  />
                </figure>
              </li>
              <li>
                <figure>
                  <img
                    src="./assets/images/law.png"
                    alt="Law Card"
                    loading="lazy"
                  />
                </figure>
              </li>
              <li>
                <figure>
                  <img
                    src="./assets/images/captainkidd.png"
                    alt="Captain Kidd Card"
                    loading="lazy"
                  />
                </figure>
              </li>
              <li>
                <figure>
                  <img
                    src="./assets/images/doflamingo.png"
                    alt="DoFlamingo Card"
                    loading="lazy"
                  />
                </figure>
              </li>
              <li>
                <figure>
                  <img src="./assets/images/zoro.png" alt="Zoro Card
                  loading="lazy" />
                </figure>
              </li>
            </ul>
          </section>

          <section class="collection" aria-labelledby="collection-heading">
            <h2 id="collection-heading">Favorite Pokemon Cards</h2>
            <ul class="cards">
              <li>
                <figure>
                  <img
                    src="./assets/images/pikatchu.png"
                    alt="pikatchu card"
                    loading="lazy"
                  />
                </figure>
              </li>
              <li>
                <figure>
                  <img
                    src="./assets/images/snorlax.png"
                    alt="Snorlax card"
                    loading="lazy"
                  />
                </figure>
              </li>
              <li>
                <figure>
                  <img
                    src="./assets/images/raquaza.png"
                    alt="Raquaza Card"
                    loading="lazy"
                  />
                </figure>
              </li>
              <li>
                <figure>
                  <img
                    src="./assets/images/ubreon.png"
                    alt="umbreon card"
                    loading="lazy"
                  />
                </figure>
              </li>
              <li>
                <figure>
                  <img
                    src="./assets/images/OPDodger.png"
                    alt="One Piece Dodger card"
                    loading="lazy"
                  />
                </figure>
              </li>
            </ul>
          </section>
        </section>
      </section>

      <section id="tech">
        <h2>Technologies Used</h2>
        <div class="tech-container">
          <section class="flex">
            <div>
              <h3>Languages</h3>
              <ul>
                <li>
                  <img
                    src="./assets/images/html.svg"
                    alt="HTML Icon"
                    loading="lazy"
                  />
                </li>
                <li>
                  <img
                    src="./assets/images/css.svg"
                    alt="CSS Icon"
                    loading="lazy"
                  />
                </li>
                <li>
                  <img
                    src="./assets/images/javascript.svg"
                    alt="Javascript icon"
                    loading="lazy"
                  />
                </li>
              </ul>
            </div>
            <div>
              <h3>Frameworks</h3>
              <ul>
                <li>
                  <img
                    src="./assets/images/react.svg"
                    alt="react icon"
                    loading="lazy"
                  />
                </li>
                <li>
                  <img
                    src="./assets/images/tailwind.svg"
                    alt="tailwind icon"
                    loading="lazy"
                  />
                </li>
                <li>
                  <img
                    src="./assets/images/django.svg"
                    alt="dkango icon"
                    loading="lazy"
                  />
                </li>
              </ul>
            </div>
            <div>
              <h3>Tools</h3>
              <ul>
                <li>
                  <img
                    src="./assets/images/prisma.svg"
                    alt="prisma icon"
                    loading="lazy"
                  />
                </li>
                <li>
                  <img
                    src="./assets/images/sql.svg"
                    alt="sql icon"
                    loading="lazy"
                  />
                </li>
                <li>
                  <img
                    src="./assets/images/mongo.svg"
                    alt="MongoDB icon"
                    loading="lazy"
                  />
                </li>
              </ul>
            </div>
          </section>
        </div>
      </section>

      <section id="projects">
        <h2>My Projects</h2>
        <section class="project-container">
          <section class="collection" aria-labelledby="collection-heading">
            <ul class="cards">
              <li>
                <figure>
                  <a href="https://stutea-test.vercel.app/" target="_blank">
                    <img
                      src="./assets/images/projects/stutea/stutea.png"
                      alt="Link to Stutea Website Project"
                      loading="lazy"
                    />
                  </a>
                </figure>
              </li>
              <li>
                <figure>
                  <a href="https://avatardle.vercel.app/" target="_blank">
                    <img
                      src="./assets/images/projects/avartardle/avatardle.png"
                      alt="Link to Avatar Website Project"
                      loading="lazy"
                    />
                  </a>
                </figure>
              </li>
            </ul>
          </section>
        </section>
      </section>

      <section id="contact">
        <form action="https://httpbin.org/post" method="POST">
          <h2>Contact</h2>
          <label for="name">Name <span>*</span></label>
          <input type="text" name="name" id="name" required />

          <label for="email">Email </label>
          <input type="email" name="email" id="email" required />

          <label for="comments">Comment <span>*</span></label>
          <textarea
            required
            id="comments"
            name="comments"
            rows="5"
            cols="40"
            placeholder="Enter your comments here..."
            required
            maxlength="200"
          ></textarea>

          <label for="phone">Phone Number <span>*</span></label>
          <input type="text" name="phone" id="phone" />

          <input
            type="text"
            id="possible_bot"
            name="possible_bot"
            value="true"
            hidden
          />

          <input type="hidden" name="form-errors" id="form-errors-json" />
          <button type="submit">Submit</button>
          <output
            id="error-msg"
            name="error"
            for="name email comments"
          ></output>
          <output id="info-msg" name="info"></output>
        </form>
      </section>
    </main>

    <footer>@copyright Andrew Ton</footer>
  </body>

  <script>
    const form = document.querySelector("form");
    const errorOutput = document.querySelector("#error-msg");
    const infoOutput = document.querySelector("#info-msg");
    const formErrorsInput = document.querySelector("#form-errors-json");

    const nameInput = document.querySelector("#name");
    const emailInput = document.querySelector("#email");
    const commentsInput = document.querySelector("#comments");
    const phoneInput = document.querySelector("#phone");

    const form_errors = [];

    nameInput.addEventListener("input", (e) => {
      const regex = /^[a-zA-Z\s]*$/;
      if (!regex.test(e.target.value)) {
        showError(nameInput, "Name only allows letters and spaces");
      }
    });

    emailInput.addEventListener("input", (e) => {
      const regex = /^[a-zA-Z0-9@._-]*$/;
      if (!regex.test(e.target.value)) {
        showError(emailInput, "Email contains illegal characters.");
      }
    });

    phoneInput.addEventListener("input", (e) => {
      const regex = /^[0-9+\s()-]*$/;
      if (!regex.test(e.target.value)) {
        showError(phoneInput, "Phone number contains illegal characters.");
      }
    });

    const maxChars = commentsInput.maxLength;
    const countdown = document.createElement("div");
    countdown.style.fontSize = "0.9rem";
    countdown.style.color = "black";
    commentsInput.insertAdjacentElement("afterend", countdown);

    commentsInput.addEventListener("input", () => {
      const remaining = maxChars - commentsInput.value.length;
      countdown.textContent = `${remaining} characters remaining`;
      if (remaining < 5) {
        countdown.style.color = "red";
      } else {
        countdown.style.color = "";
      }
      if (remaining <= 0) {
        showError(commentsInput, "You've reached the character limit.");
      }
    });

    function showError(field, message) {
      field.style.border = "2px solid red";
      errorOutput.textContent = message;
      errorOutput.style.color = "red";
      form_errors.push({
        field: field.name,
        value: field.value,
        error: message,
      });
      setTimeout(() => {
        field.style.border = "";
        errorOutput.textContent = "";
      }, 2000);
    }

    form.addEventListener("submit", (e) => {
      errorOutput.textContent = "";
      infoOutput.textContent = "";
      form_errors.length = 0;
      validateField(nameInput, "Name is required.");
      validateField(
        emailInput,
        "Valid email is required.",
        /^[^@\s]+@[^@\s]+\.[^@\s]+$/
      );
      validateField(commentsInput, "Comment is required.");
      validateField(phoneInput, "Phone number is required.", /^[0-9+\s()-]*$/);
      if (!form.checkValidity()) {
        e.preventDefault();
        errorOutput.textContent = "Please fix the errors in form";
        errorOutput.style.color = "red";
      } else {
        infoOutput.textContent = "Form submitted successfully!";
        infoOutput.style.color = "green";
      }
      formErrorsInput.value = JSON.stringify(form_errors);
    });

    function validateField(field, message, pattern = null) {
      field.setCustomValidity("");
      if (!field.value.trim()) {
        field.setCustomValidity(message);
        showError(field, message);
      } else if (pattern && !pattern.test(field.value)) {
        field.setCustomValidity("Invalid format");
        showError(field, "Invalid format");
      } else {
        field.setCustomValidity("");
      }
      field.checkValidity();
    }

    // for theme mode

    const themeDropdown = document.querySelector("#dropdown");

    const savedTheme = localStorage.getItem("selectedTheme");

    if (savedTheme) {
      document.body.classList.add(savedTheme);
      themeDropdown.value = savedTheme;
    }

    themeDropdown.addEventListener("change", (e) => {
      const selectedTheme = e.target.value;

      document.body.classList.remove(
        "light_theme",
        "dark_theme",
        "jungle_theme",
        "fire_theme",
        "sand_theme"
      );

      if (selectedTheme) {
        document.body.classList.add(selectedTheme);
        localStorage.setItem("selectedTheme", selectedTheme);
      }
    });
  </script>
</html>
